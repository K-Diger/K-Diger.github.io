---

title: JPA - 영속성 전이 (CASCADE).
author: Diger
date: 2022-12-27
categories: [Java, Spring, JPA]
tags: [Java, Spring, JPA]
layout: post
toc: true
math: true
mermaid: true

---

# 영속성 전이 (CASCADE) 란?

특정 엔티티를 영속 상태로 만들고 싶다. 근데 이 때 관련된 엔티티도 영속 상태로 만들고 싶다.

그럴 때 영속성 전이를 사용하면 된다.

---

# 영속성 전이는 연관관계랑 아무 관계가 없다.

CASCADE의 주요 종류는 다음과 같다.

- ALL : 영속성 전이 모두 적용
- PERSIST : 영속성 전이를 엔티티 저장 시에만 적용
- REMOVE : 영속성 전이를 엔티티 제거 시에만 적용

# 근데 이걸 언제 쓰지? 매번 써도 되나?

하나의 부모가 하위 클래스를 관리할 때는 써도 된다. (게시판 - 첨부파일)

두개의 부모가 하위 클래스를 관리할 때는 쓰면 안된다. (게시판 - 첨부파일 - 댓글)

---

# 고아 객체

부모 엔티티와 연관관계가 끊어진 자식 엔티티를 자동으로 삭제해주는 것

orphanRemoval 옵션을 걸고, 자식 엔티티를 지우면, 부모 엔티티에도 그 관리하던 자식 엔티티의 내용을 지운다.

